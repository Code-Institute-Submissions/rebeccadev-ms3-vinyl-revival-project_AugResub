{% extends "base.html" %}
{% block content %}


<div class="row">
    <div class="col s12 m8 offset-m2">
        <div>
        <h3 class ="center-align">
            {{username}}'s Record Collection
        </h3>
              
        </div>
    </div>
</div>

<div class="row">
    <div class="col s4 pt50">
        <h3>Your <br> Collection </h3> <br>
            <span class="valign-wrapper">
                View all of your uploaded records below! Click the album artwork
                to display extra information such as tracklisting, release dates
                and the length of the record! 
            </span>
    </div>
    <div class="col s8 pt50">
        <img class="responsive-img" src="static/images/recordcollection.jpg">
    </div>
</div>


{% for record in record %}
    {% if session.user|lower == record.created_by|lower %}
<div class="row">
        
    <div class="col s4">
        <div class="card large">
            <div class="card-image waves-effect waves-block waves-light">
                <img class="activator" src="{{ record.album_art }}">
            </div>
                <div class="card-content">
                <span class="card-title activator grey-text text-darken-4">{{ record.record_name }} <br>
                    Artist: {{ record.artist }}<i class="material-icons right"> {{ record.genre_name }}</i></span>
                        Rating: {{ record.rating }}/5
                        <span class="right">
                            {% if record.is_favourite == "on" %}
                            <i class="right fas  fa-2x fa-heart red-text tooltipped"
                            data-position="right" data-tooltip="Favourite Vinyl!"></i></span>
                            {% endif %}
                </div>
                    <div class="card-action">
                        <span class="created-by right">
                        <em>Added by: {{ record.created_by }} </em></p>       
                        </span>           
                    {% if session.user|lower == record.created_by|lower %}
                    <a href="{{ url_for('edit_record', record_id=record._id) }}" class="waves-effect waves-light btn-small">Edit</a>
                     <!-- Modal Trigger -->
                    <a class="waves-effect waves-light btn modal-trigger red" href="#modal1">Delete</a>

                    <!-- Modal Structure -->
                    <div id="modal1" class="modal">
                        <div class="modal-content">
                             <h4>Remove a record?</h4>
                            <p>Are you sure you want to remove a record from your collection? </p>
                        </div>
                        <div class="modal-footer">
                            <a href="{{ url_for('delete_record', record_id=record._id) }}" class="modal-close waves-effect waves-green btn-flat">Delete</a>
                            <a href="{{ url_for('get_record') }}" class="modal-close waves-effect waves-green btn-flat">No, take me back!</a> 
                        </div>
                    </div>
                    {% endif %}
                    </div>
                  
                <div class="card-reveal">
                    <span class="card-title grey-text text-darken-4">Extra info<i class="material-icons right">close</i></span>
                    <p>Tracklisting:
                        <ol> 
                            {% for tracklisting in record.tracklisting %}
                            <li>{{ tracklisting}}</li>
                            {% endfor %}
                        </ol>
                    </p>
                    <p> Length: {{ record.length }}</p>
                    <p> Release date: {{ record.release_date }}</p>
                </div>
        </div>   
    </div>
    {% endif %}                
{% endfor %}

{% endblock %}